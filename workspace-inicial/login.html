<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>eMercado - Todo lo que busques está aquí</title>
  
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <style>
    body {
      background-color: rgb(248, 249, 250);
    }
  </style>
</head>

<body>
  <main class="mt-5">    
  <!-- SECCION CONTENIDO -->
  <div class="contenedor">
    <img class="anchoTotal" src="img/login.png" />
    <h4>Inicio de Sesión</h4>
    <label for="email">Email</label>
    <div>
      <input class="anchoTotal" type="email" id="email" placeholder="Email">
    </div>
    <label for="password1">Contraseña</label>
    <div>
      <input class="anchoTotal" type="password" id="password1" placeholder="Contraseña">
    </div>
    <button type="button" id="regBtn" onclick="CheckLOG()">Ingresar</button>
    <button type="button" id="regresar">Regresar</button>
    </div>

    <!-- Para Google authentication  
      FUENTE: https://developers.google.com/identity/gsi/web/guides/migration#popup-mode_1 -->

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <div id="g_id_onload"
         data-client_id="535470899264-79o5ehb5mdks9nqgqb81bqn0ulejq4i8.apps.googleusercontent.com"
         data-callback="handleCredentialResponse">
      
    </div>
    <div class="g_id_signin" data-type="standard"></div>

    <script>
      function decodeJwtResponse(token) {
        var baseurl = token.split('.')[1];
        var base64 = baseurl.replace(/-/g, '+').replace(/-/g, '/');
        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        return JSON.parse(jsonPayload);
      }

      function handleCredentialResponse(usuarioGoogle) {
       localStorage.setItem("inputUSUARIO", decodeJwtResponse(usuarioGoogle.credential).name);
       window.location.href = "index.html";
       window.open("index.html", "_self");

      }

    </script> 

  </main>
  <footer class="text-muted">
    <div class="container">
      <p class="float-end">
        <a href="#">Volver arriba</a>
      </p>
      <p>Este sitio forma parte de <a href="https://jovenesaprogramar.edu.uy/" target="_blank">Jovenes a Programar</a> -
        2022</p>
      <p>Clickea <a target="_blank" href="Letra.pdf">aquí</a> para descargar la letra del obligatorio.</p>
    </div>
  </footer>

  <div class="alert alert-danger alert-dismissible fade" role="alert" id="alerta-error">
    <p>Los datos ingresados no cumplen con los requisitos solicitados</p>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <script src="js/login.js"></script>

</body>

</html>